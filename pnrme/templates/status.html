{% extends "layout.html" %}
{% block metas %}
    {{ super() }}
    {% if seo_train_name %}
        <meta content="Check PNR status of rail tickets booked in {{ seo_train_name }}
        Get instant indian railway train pnr status enquiry online at pnr.me" name="description">
    {% else %}
        <meta content="Check PNR status of all rail tickets booked with Indian Railways/IRCTC.
        Get instant indian railway train pnr status enquiry online at pnr.me. Enter 10 digit pnr" name="description">
    {% endif %}
{% endblock %}
{% block content %}
    <div class="container">
        <h2>
            Check PNR Status
        </h2>
        {% if status_form %}
                {{ wtf.quick_form(status_form, button_map={'submit_button': 'primary'}) }}

        {% endif %}

        {% if pnr_status_result %}
            <h2>
                Current PNR Status Result
            </h2>
            {% if pnr_status_result.error %}
                <h3 class="text-danger">{{ pnr_status_result.error }}</h3>
            {% elif pnr_status_result.status == "Success" %}
                <table class="table table-bordered table-striped table-hover">
                    <thead>
                    <tr>
                        <th>PNR Number</th>
                        <th>{{ pnr_status_result.pnr }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>From Station</td>
                        <td>{{ pnr_status_result.from }}</td>
                    </tr>
                    <tr>
                        <td>To Station</td>
                        <td>{{ pnr_status_result.to }}</td>
                    </tr>
                    <tr>
                        <td>Class of Travel</td>
                        <td>{{ pnr_status_result.class }}</td>
                    </tr>
                    <tr>
                        <td>Train Number</td>
                        <td>{{ pnr_status_result.train_number }}</td>
                    </tr>
                    <tr>
                        <td>Train Name</td>
                        <td>{{ pnr_status_result.train_name.title() }}</td>
                    </tr>
                    <tr>
                        <td>Boarding Date</td>
                        <td>{{ pnr_status_result.boarding_date.strftime('%Y-%m-%d') }}</td>
                    </tr>
                    <tr>
                        <td>Boarding Point</td>
                        <td>{{ pnr_status_result.boarding_point }}</td>
                    </tr>
                    <tr>
                        <td>Reservation up to</td>
                        <td>{{ pnr_status_result.reserved_upto }}</td>
                    </tr>
                    </tbody>
                </table>
                <table class="table table-bordered table-striped">
                    <thead>
                    <tr>
                        <th>Passenger Number</th>
                        <th>Booking Status</th>
                        <th>Current Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for passenger in pnr_status_result.passenger_status %}
                        <tr>
                            <td>passenger {{ loop.index }}</td>
                            <td>{{ passenger.booking_status }}</td>
                            <td>{{ passenger.current_status }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}